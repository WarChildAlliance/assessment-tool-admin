<mat-accordion>
    <mat-expansion-panel *ngFor="let assessment of currentAssessments" (opened)="getCurrentTopics(assessment.id)">
        <mat-expansion-panel-header>
            <mat-panel-title>
                {{ assessment.title }}
            </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-panel-description>
            <div>

            <!-- TODO can we put this separately to have a better overview?-->
            <div class="title">
                <div>
                <span >Topics</span>
                    <span>Details</span>
                    <button mat-button mat-stroked-button color="accent">Edit</button>
                    <button mat-button mat-stroked-button color="accent">Clone</button>
                    <button mat-button mat-stroked-button color="warn">Delete</button>
                </div>
                <table>
                    <tr class="color-header">
                        <th >Grade</th>
                        <th>Subject</th>
                        <th>Language</th>
                        <th>Country</th>
                        <th>Private</th>
                    </tr>
                    <tr>
                        <td>{{assessment.grade}}</td>
                        <td>{{assessment.subject}}</td>
                        <td>{{assessment.language_name}}</td>
                        <td>{{assessment.country_name}}</td>
                        <td>{{assessment.private}}</td>
                    </tr>
                </table>
            </div>

            <div>
                <div class="title">
                    <span >Topics</span>
                    <button mat-button mat-stroked-button color="accent">Apply settings to all topics</button>

                    <table>
                        <tr class="color-header">
                            <th>Show Feedback?</th>
                            <th>Allow Skip?</th>
                            <th>Evaluated</th>
                            <th>Praise</th>
                            <th>Max wrong answers</th>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td><input type="checkbox"></td>
                            <td><input type="checkbox"></td>
                            <td><input type="number"></td>
                            <td><input type="number"></td>
                        </tr>
                    </table>

                </div>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let topic of currentTopics" (opened)="getCurrentQuestions(assessment.id, topic.id)">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                {{ topic.name }}
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-panel-description>
                            <!-- TODO can we put this separately to have a better overview?-->
                            <div>
                                <div>
                                <div class="title">
                                    <span >Details</span>
                                    <button mat-button mat-stroked-button color="accent">Edit</button>
                                    <button mat-button mat-stroked-button color="accent">Clone</button>
                                    <button mat-button mat-stroked-button color="delete">Delete</button>
                                <table>
                                    <tr class="color-header">
                                        <th>Description</th>
                                        <th>Attachments</th>
                                        <th>Show Feedback?</th>
                                        <th>Allow Skip?</th>
                                        <th>Evaluated</th>
                                        <th>Praise</th>
                                        <th>Max wrong answers</th>
                                    </tr>
                                    <tr>
                                        <td>missing :(</td>
                                        <td>missing :(</td>
                                        <td>missing :(</td>
                                        <td>missing :(</td>
                                        <td>missing :(</td>
                                        <td>missing :(</td>
                                        <td>missing :(</td>
                                    </tr>
                                </table>
                                </div>
                            </div>
                                <mat-accordion>
                                    <mat-expansion-panel *ngFor="let question of currentQuestions">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                {{ question.title }}
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <mat-panel-description>
                                            {{question.question_type}}
                                            MORE QUESTION INFO HERE
                                        </mat-panel-description>
                                        <button mat-button mat-stroked-button color="accent">Edit</button>
                                        <button mat-button mat-stroked-button color="accent">Clone</button>
                                        <button mat-button mat-stroked-button color="warn">Delete</button>
                                    </mat-expansion-panel>
                                    
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header class="add-panel">
                                            <mat-panel-title>
                                                <mat-icon>add</mat-icon>
                                                Create New Question 
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <mat-panel-description>
                                            <app-create-question [assessmentId]="assessment.id" [topicId]="topic.id"></app-create-question>
                                        </mat-panel-description>
                                    </mat-expansion-panel>
                                </mat-accordion>
                            </div>

                            <!-- End of Question Accordeon-->
                        </mat-panel-description>
                    </mat-expansion-panel>
                
                    <mat-expansion-panel>
                        <mat-expansion-panel-header class="add-panel">
                            <mat-panel-title>
                                <mat-icon>add</mat-icon>
                                Create New Topic
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-panel-description>
                            <app-create-topic [assessmentId]="assessment.id"></app-create-topic>
                        </mat-panel-description>
                    </mat-expansion-panel>
                </mat-accordion>
                <!-- End of Topic Accordean-->
            </div>
            
        </div>  
        </mat-panel-description>
    </mat-expansion-panel>

    <mat-expansion-panel>
        <mat-expansion-panel-header class="add-panel">
            <mat-panel-title>
                <mat-icon>add</mat-icon>
                Create New Assessment
            </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-panel-description>
            <app-create-assessment></app-create-assessment>
        </mat-panel-description>
    </mat-expansion-panel>
</mat-accordion>


