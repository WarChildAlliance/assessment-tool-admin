<form [formGroup]="selectForm" (ngSubmit)="onSave()">
    <div class="form-container">
        <div class="select-details-container">
            <h2>Question</h2>

            <mat-form-field appearance="outline" class="form-group" color="accent">
                <mat-label for="title">Title</mat-label>
                <input matInput formControlName="title">
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-group" color="accent">
                <mat-label>Identifier</mat-label>
                <input matInput formControlName="identifier">
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-group" color="accent">
                <mat-label for="order">Order</mat-label>
                <input matInput type="number" formControlName="order">
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-group" color="accent">
                <mat-label for="display">Display</mat-label>
                <mat-select formControlName="display">
                    <mat-option *ngFor="let type of ['GRID', 'VERTICAL', 'HORIZONTAL']" [value]="type">{{type}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <br>
            <mat-checkbox formControlName="multiple">
                <mat-label for="multiple">Is multiple choice?</mat-label>
            </mat-checkbox>
        </div>

        <div class="attachments-container">
            <h2>Attachments</h2>
            <p>Image attachment</p>
            <button type="button" class="file_input" mat-flat-button color="primary" (click)="imageFileInput.click()">Choose
                File</button>
            <input hidden class="file_input" (change)="handleFileInput($event, 'IMAGE')" #imageFileInput type="file">
            <p>{{imageAttachment ? imageAttachment.name : 'No file chosen'}}</p>
            <p>Audio attachment</p>
            <button type="button" class="file_input" mat-flat-button color="primary" (click)="audioFileInput.click()">Choose
                File</button>
            <input hidden (change)="handleFileInput($event, 'AUDIO')" #audioFileInput type="file">
            <p>{{audioAttachment ? audioAttachment.name : 'No file chosen'}}</p>
        </div>
    </div>
    <mat-divider></mat-divider>

    <h2 style="margin-top: 20px;">Options</h2>
    <div class="options-container" formArrayName="options">
        <div class="option-form" *ngFor="let control of selectForm.controls.options['controls']; let i = index"
            [formGroupName]="i">
            <div>
                <mat-form-field appearance="outline" class="form-group" color="accent">
                    <mat-label>Value</mat-label>
                    <input matInput formControlName="value">
                </mat-form-field>
            </div>
            <mat-form-field appearance="outline" class="form-group" color="accent">
                <mat-label>Identifier</mat-label>
                <input matInput formControlName="identifier">
            </mat-form-field>
            <br>
            <mat-checkbox formControlName="valid">
                <mat-label>Is correct answer?</mat-label>
            </mat-checkbox>

            <div class="attachments-container">
                <p>Image attachment</p>
                <button type="button" class="file_input" mat-flat-button color="primary" (click)="imageFileInput.click()">Choose
                    File</button>
                <input hidden (change)="handleFileInputOptions($event, 'IMAGE', i)" #imageFileInput type="file">
                
                <p>Audio attachment</p>
                <button type="button" class="file_input" mat-flat-button color="primary" (click)="audioFileInput.click()">Choose
                    File</button>
                <input hidden (change)="handleFileInputOptions($event, 'AUDIO', i)" #audioFileInput type="file">

            </div>
        </div>
        <div>
            <button (click)="addOptions()" type="button" style="margin-left: 20px;" class="file_input" mat-button>
                <mat-icon>add</mat-icon>
                Add Option
            </button>
        </div>
        
    </div>
    <button class="question-form-button" mat-flat-button color="accent" type="submit">
        Save
    </button>
</form>