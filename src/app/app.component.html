<mat-toolbar class="header-toolbar" *ngIf="isAuthenticated">
  <app-custom-breadcrumb></app-custom-breadcrumb>

  <button mat-button class="header-toolbar__menu-button" aria-label="Access account settings"
    [matMenuTriggerFor]="accountMenu">
    <mat-icon>account_circle</mat-icon>
    <span>{{ selfName }}</span>
  </button>
  <mat-menu #accountMenu="matMenu" xPosition="before">
    <button mat-menu-item [matMenuTriggerFor]="langMenu" class="menu-button">
      <i class="uil uil-globe"></i>
      {{ "general.language" | translate }}
    </button>
    
    <button mat-menu-item (click)="logout()">
      <mat-icon matListIcon type="submit">logout</mat-icon>
      <span>
        {{ "general.logout" | translate }}
      </span>
    </button>

    <mat-menu #langMenu="matMenu">
      <ng-container *ngFor="let lang of languages">
        <app-custom-button mat-menu-item (click)="changeLanguage(lang)" [ngClass]="{'selected': languageCode === lang.code}">
          <!-- To get more instant country flags: https://flagcdn.com/  -->
          <img style="width: 25px;" [src]="lang.flag">
          {{ lang.name }}
        </app-custom-button>
      </ng-container>
    </mat-menu>
  </mat-menu>
</mat-toolbar>


<mat-sidenav-container autosize="true">
  <mat-sidenav #sidenav mode="side" [opened]="isAuthenticated">
    <mat-nav-list>
      <a mat-list-item routerLink="dashboard" routerLinkActive="list-item-active" (click)="showSubmenu = false">
        <mat-icon matListIcon>space_dashboard</mat-icon>
        {{ "general.dashboard" | translate }}
      </a>
      <a mat-list-item routerLink="students" routerLinkActive="list-item-active" (click)="showSubmenu = false">
        <mat-icon matListIcon>account_box</mat-icon>
        {{ "general.students" | translate }}
      </a>
      <a mat-list-item routerLink="groups" routerLinkActive="list-item-active" (click)="showSubmenu = false">
        <mat-icon matListIcon>group</mat-icon>
        {{ "general.groups" | translate }}
      </a>
      <a mat-list-item routerLink="assessments" routerLinkActive="list-item-active" (click)="showSubmenu = false">
        <mat-icon matListIcon>quiz</mat-icon>
        {{ "general.assessments" | translate }}
      </a>
      <mat-divider *ngIf="showSubmenu"></mat-divider>
      <mat-list-item (click)="showSubmenu = !showSubmenu">
        <mat-icon matListIcon>space_dashboard</mat-icon>
        {{ "general.assessmentBuilder" | translate }}
      </mat-list-item>
      <mat-divider *ngIf="showSubmenu"></mat-divider>
      <div class="submenu" [ngClass]="{'expanded' : showSubmenu}">
        <a mat-list-item routerLink="assessment-builder/your-assessments" routerLinkActive="list-item-active">
          {{ "general.yourAssessments" | translate }}
        </a>
        <a mat-list-item routerLink="assessment-builder/public-assessments" routerLinkActive="list-item-active">
          {{ "general.publicAssessments" | translate }}
        </a>
        <a mat-list-item routerLink="assessment-builder/archived-assessments" routerLinkActive="list-item-active">
          {{ "general.archivedAssessments" | translate }}
        </a>
      </div>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
