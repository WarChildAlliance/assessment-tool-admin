<mat-dialog-content style="max-height: 80vh">
    <div class="dialog-container">
        <h1>{{assessmentTitle}}</h1>

        <div [formGroup]="assignQuestionSetForm" class="question-set-accesses-builder__list">
            <span class="header" *ngIf="assignQuestionSetForm.value.access.length">
                {{ 'students.questionSetAccessesEdit.editQuestionSetsAccess' | translate }}
            </span>

            <span *ngIf="!assignQuestionSetForm.value.access.length">
                {{ 'students.questionSetAccessesEdit.allQuestionSetsAccessesDeleted' | translate }}
            </span>

            <ng-container formArrayName="access">
                <div class="question-set-accesses-builder__list__set-dates" *ngIf="controls.length">
                    <mat-form-field color="accent" appearance="outline">
                        <mat-date-range-input [rangePicker]="setUpDateForAll" [min]="minDate">
                            <input (dateInput)="onDateInput('start_date', $event.value)" matStartDate [placeholder]="'students.questionSetAccessesBuilder.startDate' | translate">
                            <input (dateInput)="onDateInput('end_date', $event.value)" matEndDate [placeholder]="'students.questionSetAccessesBuilder.endDate' | translate">
                        </mat-date-range-input>
                        <mat-datepicker-toggle matSuffix [for]="setUpDateForAll"></mat-datepicker-toggle>
                        <mat-date-range-picker #setUpDateForAll></mat-date-range-picker>
                    </mat-form-field>
                    <div class="apply-all">
                        <mat-checkbox (change)="onApplyToAllQuestionSets($event.checked)">
                            {{ "students.questionSetAccessesBuilder.applySameDatesAllQuestionSets" | translate }}
                        </mat-checkbox>
                    </div>
                </div>
                <div *ngFor="let control of controls; let i=index;" [formGroupName]="i"
                    class="question-set-accesses-builder__list-row -question-set-access">

                    <span>
                        {{ control.get('question_set').value.question_set_name }}
                    </span>

                    <div>
                        <mat-form-field color="accent" appearance="outline">
                            <mat-date-range-input [rangePicker]="campaignOnePicker" [min]="minDate">
                                <input matStartDate formControlName="start_date" [placeholder]="'students.questionSetAccessesBuilder.startDate' | translate">
                                <input matEndDate formControlName="end_date" [placeholder]="'students.questionSetAccessesBuilder.endDate' | translate">
                            </mat-date-range-input>
                            <mat-datepicker-toggle matSuffix [for]="campaignOnePicker"></mat-datepicker-toggle>
                            <mat-date-range-picker #campaignOnePicker></mat-date-range-picker>
                        </mat-form-field>

                        <app-custom-button matTooltip="{{ 'students.questionSetAccessesEdit.removeQuestionSetAccess' | translate }}" [isIcon]="true"
                            icon="remove_circle_outline" (click)="removeQuestionSetAccess(control)">
                        </app-custom-button>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>

    <div class="dialog-buttons">
        <button mat-flat-button mat-dialog-close [mat-dialog-close]="deletedQuestionSet" class="dialog-buttons__cancel" color="secondary">
            {{ "general.cancel" | translate }}
        </button>
        <button *ngIf="controls.length" mat-flat-button class="dialog-buttons__submit" [disabled]="!controls.length || !assignQuestionSetForm.dirty || !assignQuestionSetForm.valid" color="accent"
        (click)="submitCreateQuestionSetAccesses()" [mat-dialog-close]="assignQuestionSetForm.value">
            {{ "general.assign" | translate }}
        </button>
    </div>
</mat-dialog-content>
