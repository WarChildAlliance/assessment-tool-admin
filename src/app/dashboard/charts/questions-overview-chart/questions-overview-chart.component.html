<mat-card>
  <mat-card-title>{{ "dashboard.questionsOverview.groupResults" | translate }}</mat-card-title>
  <mat-card-subtitle>
    {{ "dashboard.firstTry" | translate }}
  </mat-card-subtitle>

  <mat-card-content *ngIf="hasData">
    <div class="left-column">
      <app-select-assessment
        (questionSetSelection)="onQuestionSetSelection($event)"
        [questionSetSelectionEnabled]="true"
        [multiple]="false"
        [displayNonEvaluated]="false">
      </app-select-assessment>
      <app-select-group style="margin-top: 15px"
        (groupsSelection)="getQuestionsOverview($event)"
        [multiple]="true"
      ></app-select-group>
    </div>

    <app-spinner style="margin: auto;" *ngIf="loading" size="large" [variant]="'default'"></app-spinner>

    <div class="barChart" [hidden]="!selectionHasData || loading">
      <canvas id="barChart"></canvas>
    </div>

    <ng-container *ngIf="selectionHasData; else selectionNoData">
      <div class="question-details" *ngIf="questionDetails && !loading">
        <ng-container *ngIf="questionDetails.question_type === 'SELECT'">
          <app-question-select [question]="questionDetails" [index]="index" [evaluated]="true"></app-question-select>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'INPUT'">
          <app-question-input [question]="questionDetails" [index]="index" [evaluated]="true"></app-question-input>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'SORT'">
          <app-question-sort [question]="questionDetails" [index]="index" [evaluated]="true"></app-question-sort>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'NUMBER_LINE'">
          <app-question-numberline [question]="questionDetails" [index]="index" [evaluated]="true">
          </app-question-numberline>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'DRAG_AND_DROP'">
          <app-question-drag-and-drop [question]="questionDetails" [assessmentId]="assessmentId" [questionSetId]="questionSetId"
            [index]="index" [evaluated]="true" [shrinkBackgroundImage]="true"></app-question-drag-and-drop>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'DOMINO'">
          <app-question-domino [question]="questionDetails" [index]="index" [evaluated]="true"></app-question-domino>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'CALCUL'">
          <app-question-calcul [question]="questionDetails" [index]="index" [evaluated]="true"></app-question-calcul>
        </ng-container>

        <ng-container *ngIf="questionDetails.question_type === 'CUSTOMIZED_DRAG_AND_DROP'">
          <app-customized-drag-and-drop [question]="questionDetails" [index]="index" [evaluated]="true"></app-customized-drag-and-drop>
        </ng-container>
      </div>
    </ng-container>
    <ng-template #selectionNoData>
      <p class="selection-no-data">{{ "general.noData" | translate }}</p>
    </ng-template>
  </mat-card-content>
  <p *ngIf="!hasData" style="text-align: center;">
    {{ "general.noData" | translate }}
  </p>
</mat-card>